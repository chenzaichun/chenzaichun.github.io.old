<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Python二维条形码生成 - 木哈哈--瞎折腾</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="Chen, Zai-Chun"><meta name=description content="Python下可以用Elaphe来生成二维条形码，如果不想安装软件的话，可以试试下面的脚本：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139  #!/usr/bin/env python import re, Image, ImageDraw code_img_data=[&amp;#39;11011001100&amp;#39;,&amp;#39;11001101100&amp;#39;,&amp;#39;11001100110&amp;#39;, &amp;#39;10010011000&amp;#39;,&amp;#39;10010001100&amp;#39;,&amp;#39;10001001100&amp;#39;, &amp;#39;10011001000&amp;#39;,&amp;#39;10011000100&amp;#39;,&amp;#39;10001100100&amp;#39;, &amp;#39;11001001000&amp;#39;,&amp;#39;11001000100&amp;#39;,&amp;#39;11000100100&amp;#39;, &amp;#39;10110011100&amp;#39;,&amp;#39;10011011100&amp;#39;,&amp;#39;10011001110&amp;#39;, &amp;#39;10111001100&amp;#39;,&amp;#39;10011101100&amp;#39;,&amp;#39;10011100110&amp;#39;, &amp;#39;11001110010&amp;#39;,&amp;#39;11001011100&amp;#39;,&amp;#39;11001001110&amp;#39;, &amp;#39;11011100100&amp;#39;,&amp;#39;11001110100&amp;#39;,&amp;#39;11101101110&amp;#39;, &amp;#39;11101001100&amp;#39;,&amp;#39;11100101100&amp;#39;,&amp;#39;11100100110&amp;#39;, &amp;#39;11101100100&amp;#39;,&amp;#39;11100110100&amp;#39;,&amp;#39;11100110010&amp;#39;, &amp;#39;11011011000&amp;#39;,&amp;#39;11011000110&amp;#39;,&amp;#39;11000110110&amp;#39;, &amp;#39;10100011000&amp;#39;,&amp;#39;10001011000&amp;#39;,&amp;#39;10001000110&amp;#39;, &amp;#39;10110001000&amp;#39;,&amp;#39;10001101000&amp;#39;,&amp;#39;10001100010&amp;#39;, &amp;#39;11010001000&amp;#39;,&amp;#39;11000101000&amp;#39;,&amp;#39;11000100010&amp;#39;, &amp;#39;10110111000&amp;#39;,&amp;#39;10110001110&amp;#39;,&amp;#39;10001101110&amp;#39;, &amp;#39;10111011000&amp;#39;,&amp;#39;10111000110&amp;#39;,&amp;#39;10001110110&amp;#39;, &amp;#39;11101110110&amp;#39;,&amp;#39;11010001110&amp;#39;,&amp;#39;11000101110&amp;#39;, &amp;#39;11011101000&amp;#39;,&amp;#39;11011100010&amp;#39;,&amp;#39;11011101110&amp;#39;, &amp;#39;11101011000&amp;#39;,&amp;#39;11101000110&amp;#39;,&amp;#39;11100010110&amp;#39;, &amp;#39;11101101000&amp;#39;,&amp;#39;11101100010&amp;#39;,&amp;#39;11100011010&amp;#39;, &amp;#39;11101111010&amp;#39;,&amp;#39;11001000010&amp;#39;,&amp;#39;11110001010&amp;#39;, &amp;#39;10100110000&amp;#39;,&amp;#39;10100001100&amp;#39;,&amp;#39;10010110000&amp;#39;, &amp;#39;10010000110&amp;#39;,&amp;#39;10000101100&amp;#39;,&amp;#39;10000100110&amp;#39;, &amp;#39;10110010000&amp;#39;,&amp;#39;10110000100&amp;#39;,&amp;#39;10011010000&amp;#39;, &amp;#39;10011000010&amp;#39;,&amp;#39;10000110100&amp;#39;,&amp;#39;10000110010&amp;#39;, &amp;#39;11000010010&amp;#39;,&amp;#39;11001010000&amp;#39;,&amp;#39;11110111010&amp;#39;, &amp;#39;11000010100&amp;#39;,&amp;#39;10001111010&amp;#39;,&amp;#39;10100111100&amp;#39;, &amp;#39;10010111100&amp;#39;,&amp;#39;10010011110&amp;#39;,&amp;#39;10111100100&amp;#39;, &amp;#39;10011110100&amp;#39;,&amp;#39;10011110010&amp;#39;,&amp;#39;11110100100&amp;#39;, &amp;#39;11110010100&amp;#39;,&amp;#39;11110010010&amp;#39;,&amp;#39;11011011110&amp;#39;, &amp;#39;11011110110&amp;#39;,&amp;#39;11110110110&amp;#39;,&amp;#39;10101111000&amp;#39;, &amp;#39;10100011110&amp;#39;,&amp;#39;10001011110&amp;#39;,&amp;#39;10111101000&amp;#39;, &amp;#39;10111100010&amp;#39;,&amp;#39;11110101000&amp;#39;,&amp;#39;11110100010&amp;#39;, &amp;#39;10111011110&amp;#39;,&amp;#39;10111101110&amp;#39;,&amp;#39;11101011110&amp;#39;, &amp;#39;11110101110&amp;#39;,&amp;#39;11010000100&amp;#39;,&amp;#39;11010010000&amp;#39;, &amp;#39;11010011100&amp;#39;,&amp;#39;1100011101011&amp;#39; ] code_b_data={&amp;#39; &amp;#39;: 0, &amp;#39;!&amp;#39;: 1, &amp;#39;&amp;#34;&amp;#39;: 2, &amp;#39;#&amp;#39;: 3, &amp;#39;$&amp;#39;: 4, &amp;#39;%&amp;#39;: 5, &amp;#39;&amp;amp;&amp;#39;: 6, &amp;#39;&amp;#39;&amp;#39;: 7, &amp;#39;(&amp;#39;: 8, &amp;#39;)&amp;#39;: 9, &amp;#39;*&amp;#39;: 10, &amp;#39;+&amp;#39;: 11, &amp;#39;,&amp;#39;: 12, &amp;#39;-&amp;#39;: 13, &amp;#39;.&amp;#39;: 14, &amp;#39;/&amp;#39;: 15, &amp;#39;0&amp;#39;: 16, &amp;#39;1&amp;#39;: 17, &amp;#39;2&amp;#39;: 18, &amp;#39;3&amp;#39;: 19, &amp;#39;4&amp;#39;: 20, &amp;#39;5&amp;#39;: 21, &amp;#39;6&amp;#39;: 22, &amp;#39;7&amp;#39;: 23, &amp;#39;8&amp;#39;: 24, &amp;#39;9&amp;#39;: 25, &amp;#39;:&amp;#39;: 26, &amp;#39;;&amp;#39;: 27, &amp;#39;&amp;lt;&amp;#39;: 28, &amp;#39;=&amp;#39;: 29, &amp;#39;&amp;gt;&amp;#39;: 30, &amp;#39;?&amp;#39;: 31, &amp;#39;@&amp;#39;: 32, &amp;#39;A&amp;#39;: 33, &amp;#39;B&amp;#39;: 34, &amp;#39;C&amp;#39;: 35, &amp;#39;D&amp;#39;: 36, &amp;#39;E&amp;#39;: 37, &amp;#39;F&amp;#39;: 38, &amp;#39;G&amp;#39;: 39, &amp;#39;H&amp;#39;: 40, &amp;#39;I&amp;#39;: 41, &amp;#39;J&amp;#39;: 42, &amp;#39;K&amp;#39;: 43, &amp;#39;L&amp;#39;: 44, &amp;#39;M&amp;#39;: 45, &amp;#39;N&amp;#39;: 46, &amp;#39;O&amp;#39;: 47, &amp;#39;P&amp;#39;: 48, &amp;#39;Q&amp;#39;: 49, &amp;#39;R&amp;#39;: 50, &amp;#39;S&amp;#39;: 51, &amp;#39;T&amp;#39;: 52, &amp;#39;U&amp;#39;: 53, &amp;#39;V&amp;#39;: 54, &amp;#39;W&amp;#39;: 55, &amp;#39;X&amp;#39;: 56, &amp;#39;Y&amp;#39;: 57, &amp;#39;Z&amp;#39;: 58, &amp;#39;[&amp;#39;: 59, &amp;#39;\&amp;#39;: 60, &amp;#39;]&amp;#39;: 61, &amp;#39;^&amp;#39;: 62, &amp;#39;_&amp;#39;: 63, &amp;#39;`&amp;#39;: 64, &amp;#39;a&amp;#39;: 65, &amp;#39;b&amp;#39;: 66, &amp;#39;c&amp;#39;: 67, &amp;#39;d&amp;#39;: 68, &amp;#39;e&amp;#39;: 69, &amp;#39;f&amp;#39;: 70, &amp;#39;g&amp;#39;: 71, &amp;#39;h&amp;#39;: 72, &amp;#39;I&amp;#39;: 73, &amp;#39;j&amp;#39;: 74, &amp;#39;k&amp;#39;: 75, &amp;#39;l&amp;#39;: 76, &amp;#39;m&amp;#39;: 77, &amp;#39;n&amp;#39;: 78, &amp;#39;o&amp;#39;: 79, &amp;#39;p&amp;#39;: 80, &amp;#39;q&amp;#39;: 81, &amp;#39;r&amp;#39;: 82, &amp;#39;s&amp;#39;: 83, &amp;#39;t&amp;#39;: 84, &amp;#39;u&amp;#39;: 85, &amp;#39;v&amp;#39;: 86, &amp;#39;w&amp;#39;: 87, &amp;#39;x&amp;#39;: 88, &amp;#39;y&amp;#39;: 89, &amp;#39;z&amp;#39;: 90, &amp;#39;{&amp;#39;: 91, &amp;#39;|&amp;#39;: 92, &amp;#39;}&amp;#39;: 93, &amp;#39;~&amp;#39;: 94, &amp;#39;DEL&amp;#39;: 95, &amp;#39;FNC3&amp;#39;: 96, &amp;#39;FNC2&amp;#39;: 97, &amp;#39;SHIFT&amp;#39;: 98, &amp;#39;Code C&amp;#39;: 99, &amp;#39;FNC4&amp;#39;: 100, &amp;#39;Code A&amp;#39;: 101, &amp;#39;FNC1&amp;#39;: 102, &amp;#39;START A&amp;#39;: 103, &amp;#39;START B&amp;#39;: 104, &amp;#39;START C&amp;#39;: 105, &amp;#39;STOP&amp;#39;: 106 } def codeBFromString (string): code=code_img_data[code_b_data[&amp;#39;START B&amp;#39;]] count=1 checksum=code_b_data[&amp;#39;START B&amp;#39;] for letter in string: code += code_img_data[code_b_data[letter]] checksum += count*code_b_data[letter] count += 1 code += code_img_data[checksum%103] code += code_img_data[code_b_data[&amp;#39;STOP&amp;#39;]] return (code) def codeBCFromString (string): # Look for even numbered groups of digits (at least 4) to use code c frags = re.split(&amp;#39;(dd(?:dd)+)&amp;#39;, string) if frags[0]: # the string starts with regular code b data code = code_img_data[code_b_data[&amp;#39;START B&amp;#39;]] checksum = code_b_data[&amp;#39;START B&amp;#39;] codeb = True else: # the string starts with a matching set of numbers - code c code = code_img_data[code_b_data[&amp;#39;START C&amp;#39;]] checksum = code_b_data[&amp;#39;START C&amp;#39;] codeb = False frags.pop(0) # remove the last frag if it&amp;#39;s blank # i.e. if the string ends with a matching numeric sequence if not(frags[-1]): frags.pop(-1) count = 1 for frag in frags: if codeb: if count &amp;gt; 1: #switch to code b code += code_img_data[100] checksum += count*100 count += 1 for letter in frag: code += code_img_data[code_b_data[letter]] checksum += count*code_b_data[letter] count += 1 else: if count &amp;gt; 1: #switch to code c code += code_img_data[code_b_data[&amp;#39;Code C&amp;#39;]] checksum += count*code_b_data[&amp;#39;Code C&amp;#39;] count += 1 for pair in re.findall(&amp;#39;..&amp;#39;, frag): code += code_img_data[int(pair)] checksum += count*int(pair) count += 1 codeb = not(codeb) code += code_img_data[checksum%103] code += code_img_data[code_b_data[&amp;#39;STOP&amp;#39;]] return (code) def barcodeImg (string, label=&amp;#39;&amp;#39;): width = len(string) + 20 im = Image.new(&amp;#39;1&amp;#39;, (width,70), 1) draw = ImageDraw.Draw(im) x = 10 for char in string: draw.rectangle(((x, 10),(x, 50)), fill=not(int(char))) x += 1 if label: labelsize = draw.textsize(label) draw.text((int((width-labelsize[0])/2.0), 55), label, fill=0) return im bc_img = barcodeImg(codeBCFromString(&amp;#39;496340&amp;#39;), &amp;#39;496340&amp;#39;) #bc_img.show() bc_img.save(&amp;#34;dsafdsa.png&amp;#34;)   "><meta name=keywords content="Hugo,theme,even,emacs,programming,linux,go,java,python,spring,hadoop,ai"><meta name=generator content="Hugo 0.85.0 with theme even"><link rel=canonical href=https://chenzaichun.github.io/post/2011-10-26-python_barcode_generate/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><meta property="og:title" content="Python二维条形码生成"><meta property="og:description" content="Python下可以用Elaphe来生成二维条形码，如果不想安装软件的话，可以试试下面的脚本：


  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139


#!/usr/bin/env python
import re, Image, ImageDraw

code_img_data=['11011001100','11001101100','11001100110',
               '10010011000','10010001100','10001001100',
               '10011001000','10011000100','10001100100',
               '11001001000','11001000100','11000100100',
               '10110011100','10011011100','10011001110',
               '10111001100','10011101100','10011100110',
               '11001110010','11001011100','11001001110',
               '11011100100','11001110100','11101101110',
               '11101001100','11100101100','11100100110',
               '11101100100','11100110100','11100110010',
               '11011011000','11011000110','11000110110',
               '10100011000','10001011000','10001000110',
               '10110001000','10001101000','10001100010',
               '11010001000','11000101000','11000100010',
               '10110111000','10110001110','10001101110',
               '10111011000','10111000110','10001110110',
               '11101110110','11010001110','11000101110',
               '11011101000','11011100010','11011101110',
               '11101011000','11101000110','11100010110',
               '11101101000','11101100010','11100011010',
               '11101111010','11001000010','11110001010',
               '10100110000','10100001100','10010110000',
               '10010000110','10000101100','10000100110',
               '10110010000','10110000100','10011010000',
               '10011000010','10000110100','10000110010',
               '11000010010','11001010000','11110111010',
               '11000010100','10001111010','10100111100',
               '10010111100','10010011110','10111100100',
               '10011110100','10011110010','11110100100',
               '11110010100','11110010010','11011011110',
               '11011110110','11110110110','10101111000',
               '10100011110','10001011110','10111101000',
               '10111100010','11110101000','11110100010',
               '10111011110','10111101110','11101011110',
               '11110101110','11010000100','11010010000',
               '11010011100','1100011101011'
               ]

code_b_data={' ': 0, '!': 1, '&#34;': 2, '#': 3, '$': 4,
             '%': 5, '&': 6, ''': 7, '(': 8, ')': 9,
             '*': 10, '+': 11, ',': 12, '-': 13, '.': 14,
             '/': 15, '0': 16, '1': 17, '2': 18, '3': 19,
             '4': 20, '5': 21, '6': 22, '7': 23, '8': 24,
             '9': 25, ':': 26, ';': 27, '<': 28, '=': 29,
             '>': 30, '?': 31, '@': 32, 'A': 33, 'B': 34,
             'C': 35, 'D': 36, 'E': 37, 'F': 38, 'G': 39,
             'H': 40, 'I': 41, 'J': 42, 'K': 43, 'L': 44,
             'M': 45, 'N': 46, 'O': 47, 'P': 48, 'Q': 49,
             'R': 50, 'S': 51, 'T': 52, 'U': 53, 'V': 54,
             'W': 55, 'X': 56, 'Y': 57, 'Z': 58, '[': 59,
             '\': 60, ']': 61, '^': 62, '_': 63, '`': 64,
             'a': 65, 'b': 66, 'c': 67, 'd': 68, 'e': 69,
             'f': 70, 'g': 71, 'h': 72, 'I': 73, 'j': 74,
             'k': 75, 'l': 76, 'm': 77, 'n': 78, 'o': 79,
             'p': 80, 'q': 81, 'r': 82, 's': 83, 't': 84,
             'u': 85, 'v': 86, 'w': 87, 'x': 88, 'y': 89,
             'z': 90, '{': 91, '|': 92, '}': 93, '~': 94,
             'DEL': 95, 'FNC3': 96, 'FNC2': 97, 'SHIFT': 98,
             'Code C': 99, 'FNC4': 100, 'Code A': 101,
             'FNC1': 102, 'START A': 103, 'START B': 104,
             'START C': 105, 'STOP': 106
             }

def codeBFromString (string):
    code=code_img_data[code_b_data['START B']]
    count=1
    checksum=code_b_data['START B']
    for letter in string:
        code += code_img_data[code_b_data[letter]]
        checksum += count*code_b_data[letter]
        count += 1
    code += code_img_data[checksum%103]
    code += code_img_data[code_b_data['STOP']]
    return (code)

def codeBCFromString (string):
    # Look for even numbered groups of digits (at least 4) to use code c
    frags = re.split('(dd(?:dd)+)', string)
    if frags[0]:
        # the string starts with regular code b data
        code = code_img_data[code_b_data['START B']]
        checksum = code_b_data['START B']
        codeb = True
    else:
        # the string starts with a matching set of numbers - code c
        code = code_img_data[code_b_data['START C']]
        checksum = code_b_data['START C']
        codeb = False
        frags.pop(0)

    # remove the last frag if it's blank
    # i.e. if the string ends with a matching numeric sequence
    if not(frags[-1]):
        frags.pop(-1)

    count = 1
    for frag in frags:
        if codeb:
            if count > 1: #switch to code b
                code += code_img_data[100]
                checksum += count*100
                count += 1
            for letter in frag:
                code += code_img_data[code_b_data[letter]]
                checksum += count*code_b_data[letter]
                count += 1
        else:
            if count > 1: #switch to code c
                code += code_img_data[code_b_data['Code C']]
                checksum += count*code_b_data['Code C']
                count += 1
            for pair in re.findall('..', frag):
                code += code_img_data[int(pair)]
                checksum += count*int(pair)
                count += 1
        codeb = not(codeb)
    code += code_img_data[checksum%103]
    code += code_img_data[code_b_data['STOP']]
    return (code)

def barcodeImg (string, label=''):
    width = len(string) + 20
    im = Image.new('1', (width,70), 1)
    draw = ImageDraw.Draw(im)
    x = 10
    for char in string:
        draw.rectangle(((x, 10),(x, 50)), fill=not(int(char)))
        x += 1
    if label:
        labelsize = draw.textsize(label)
        draw.text((int((width-labelsize[0])/2.0), 55), label, fill=0)
    return im

bc_img = barcodeImg(codeBCFromString('496340'), '496340')
#bc_img.show()
bc_img.save(&#34;dsafdsa.png&#34;)


"><meta property="og:type" content="article"><meta property="og:url" content="https://chenzaichun.github.io/post/2011-10-26-python_barcode_generate/"><meta property="article:section" content="post"><meta property="article:published_time" content="2011-10-26T09:10:11+08:00"><meta property="article:modified_time" content="2011-10-26T09:10:11+08:00"><meta itemprop=name content="Python二维条形码生成"><meta itemprop=description content="Python下可以用Elaphe来生成二维条形码，如果不想安装软件的话，可以试试下面的脚本：


  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139


#!/usr/bin/env python
import re, Image, ImageDraw

code_img_data=['11011001100','11001101100','11001100110',
               '10010011000','10010001100','10001001100',
               '10011001000','10011000100','10001100100',
               '11001001000','11001000100','11000100100',
               '10110011100','10011011100','10011001110',
               '10111001100','10011101100','10011100110',
               '11001110010','11001011100','11001001110',
               '11011100100','11001110100','11101101110',
               '11101001100','11100101100','11100100110',
               '11101100100','11100110100','11100110010',
               '11011011000','11011000110','11000110110',
               '10100011000','10001011000','10001000110',
               '10110001000','10001101000','10001100010',
               '11010001000','11000101000','11000100010',
               '10110111000','10110001110','10001101110',
               '10111011000','10111000110','10001110110',
               '11101110110','11010001110','11000101110',
               '11011101000','11011100010','11011101110',
               '11101011000','11101000110','11100010110',
               '11101101000','11101100010','11100011010',
               '11101111010','11001000010','11110001010',
               '10100110000','10100001100','10010110000',
               '10010000110','10000101100','10000100110',
               '10110010000','10110000100','10011010000',
               '10011000010','10000110100','10000110010',
               '11000010010','11001010000','11110111010',
               '11000010100','10001111010','10100111100',
               '10010111100','10010011110','10111100100',
               '10011110100','10011110010','11110100100',
               '11110010100','11110010010','11011011110',
               '11011110110','11110110110','10101111000',
               '10100011110','10001011110','10111101000',
               '10111100010','11110101000','11110100010',
               '10111011110','10111101110','11101011110',
               '11110101110','11010000100','11010010000',
               '11010011100','1100011101011'
               ]

code_b_data={' ': 0, '!': 1, '&#34;': 2, '#': 3, '$': 4,
             '%': 5, '&': 6, ''': 7, '(': 8, ')': 9,
             '*': 10, '+': 11, ',': 12, '-': 13, '.': 14,
             '/': 15, '0': 16, '1': 17, '2': 18, '3': 19,
             '4': 20, '5': 21, '6': 22, '7': 23, '8': 24,
             '9': 25, ':': 26, ';': 27, '<': 28, '=': 29,
             '>': 30, '?': 31, '@': 32, 'A': 33, 'B': 34,
             'C': 35, 'D': 36, 'E': 37, 'F': 38, 'G': 39,
             'H': 40, 'I': 41, 'J': 42, 'K': 43, 'L': 44,
             'M': 45, 'N': 46, 'O': 47, 'P': 48, 'Q': 49,
             'R': 50, 'S': 51, 'T': 52, 'U': 53, 'V': 54,
             'W': 55, 'X': 56, 'Y': 57, 'Z': 58, '[': 59,
             '\': 60, ']': 61, '^': 62, '_': 63, '`': 64,
             'a': 65, 'b': 66, 'c': 67, 'd': 68, 'e': 69,
             'f': 70, 'g': 71, 'h': 72, 'I': 73, 'j': 74,
             'k': 75, 'l': 76, 'm': 77, 'n': 78, 'o': 79,
             'p': 80, 'q': 81, 'r': 82, 's': 83, 't': 84,
             'u': 85, 'v': 86, 'w': 87, 'x': 88, 'y': 89,
             'z': 90, '{': 91, '|': 92, '}': 93, '~': 94,
             'DEL': 95, 'FNC3': 96, 'FNC2': 97, 'SHIFT': 98,
             'Code C': 99, 'FNC4': 100, 'Code A': 101,
             'FNC1': 102, 'START A': 103, 'START B': 104,
             'START C': 105, 'STOP': 106
             }

def codeBFromString (string):
    code=code_img_data[code_b_data['START B']]
    count=1
    checksum=code_b_data['START B']
    for letter in string:
        code += code_img_data[code_b_data[letter]]
        checksum += count*code_b_data[letter]
        count += 1
    code += code_img_data[checksum%103]
    code += code_img_data[code_b_data['STOP']]
    return (code)

def codeBCFromString (string):
    # Look for even numbered groups of digits (at least 4) to use code c
    frags = re.split('(dd(?:dd)+)', string)
    if frags[0]:
        # the string starts with regular code b data
        code = code_img_data[code_b_data['START B']]
        checksum = code_b_data['START B']
        codeb = True
    else:
        # the string starts with a matching set of numbers - code c
        code = code_img_data[code_b_data['START C']]
        checksum = code_b_data['START C']
        codeb = False
        frags.pop(0)

    # remove the last frag if it's blank
    # i.e. if the string ends with a matching numeric sequence
    if not(frags[-1]):
        frags.pop(-1)

    count = 1
    for frag in frags:
        if codeb:
            if count > 1: #switch to code b
                code += code_img_data[100]
                checksum += count*100
                count += 1
            for letter in frag:
                code += code_img_data[code_b_data[letter]]
                checksum += count*code_b_data[letter]
                count += 1
        else:
            if count > 1: #switch to code c
                code += code_img_data[code_b_data['Code C']]
                checksum += count*code_b_data['Code C']
                count += 1
            for pair in re.findall('..', frag):
                code += code_img_data[int(pair)]
                checksum += count*int(pair)
                count += 1
        codeb = not(codeb)
    code += code_img_data[checksum%103]
    code += code_img_data[code_b_data['STOP']]
    return (code)

def barcodeImg (string, label=''):
    width = len(string) + 20
    im = Image.new('1', (width,70), 1)
    draw = ImageDraw.Draw(im)
    x = 10
    for char in string:
        draw.rectangle(((x, 10),(x, 50)), fill=not(int(char)))
        x += 1
    if label:
        labelsize = draw.textsize(label)
        draw.text((int((width-labelsize[0])/2.0), 55), label, fill=0)
    return im

bc_img = barcodeImg(codeBCFromString('496340'), '496340')
#bc_img.show()
bc_img.save(&#34;dsafdsa.png&#34;)


"><meta itemprop=datePublished content="2011-10-26T09:10:11+08:00"><meta itemprop=dateModified content="2011-10-26T09:10:11+08:00"><meta itemprop=wordCount content="702"><meta itemprop=keywords content="emacs,Linux,org2blog,python,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Python二维条形码生成"><meta name=twitter:description content="Python下可以用Elaphe来生成二维条形码，如果不想安装软件的话，可以试试下面的脚本：


  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139


#!/usr/bin/env python
import re, Image, ImageDraw

code_img_data=['11011001100','11001101100','11001100110',
               '10010011000','10010001100','10001001100',
               '10011001000','10011000100','10001100100',
               '11001001000','11001000100','11000100100',
               '10110011100','10011011100','10011001110',
               '10111001100','10011101100','10011100110',
               '11001110010','11001011100','11001001110',
               '11011100100','11001110100','11101101110',
               '11101001100','11100101100','11100100110',
               '11101100100','11100110100','11100110010',
               '11011011000','11011000110','11000110110',
               '10100011000','10001011000','10001000110',
               '10110001000','10001101000','10001100010',
               '11010001000','11000101000','11000100010',
               '10110111000','10110001110','10001101110',
               '10111011000','10111000110','10001110110',
               '11101110110','11010001110','11000101110',
               '11011101000','11011100010','11011101110',
               '11101011000','11101000110','11100010110',
               '11101101000','11101100010','11100011010',
               '11101111010','11001000010','11110001010',
               '10100110000','10100001100','10010110000',
               '10010000110','10000101100','10000100110',
               '10110010000','10110000100','10011010000',
               '10011000010','10000110100','10000110010',
               '11000010010','11001010000','11110111010',
               '11000010100','10001111010','10100111100',
               '10010111100','10010011110','10111100100',
               '10011110100','10011110010','11110100100',
               '11110010100','11110010010','11011011110',
               '11011110110','11110110110','10101111000',
               '10100011110','10001011110','10111101000',
               '10111100010','11110101000','11110100010',
               '10111011110','10111101110','11101011110',
               '11110101110','11010000100','11010010000',
               '11010011100','1100011101011'
               ]

code_b_data={' ': 0, '!': 1, '&#34;': 2, '#': 3, '$': 4,
             '%': 5, '&': 6, ''': 7, '(': 8, ')': 9,
             '*': 10, '+': 11, ',': 12, '-': 13, '.': 14,
             '/': 15, '0': 16, '1': 17, '2': 18, '3': 19,
             '4': 20, '5': 21, '6': 22, '7': 23, '8': 24,
             '9': 25, ':': 26, ';': 27, '<': 28, '=': 29,
             '>': 30, '?': 31, '@': 32, 'A': 33, 'B': 34,
             'C': 35, 'D': 36, 'E': 37, 'F': 38, 'G': 39,
             'H': 40, 'I': 41, 'J': 42, 'K': 43, 'L': 44,
             'M': 45, 'N': 46, 'O': 47, 'P': 48, 'Q': 49,
             'R': 50, 'S': 51, 'T': 52, 'U': 53, 'V': 54,
             'W': 55, 'X': 56, 'Y': 57, 'Z': 58, '[': 59,
             '\': 60, ']': 61, '^': 62, '_': 63, '`': 64,
             'a': 65, 'b': 66, 'c': 67, 'd': 68, 'e': 69,
             'f': 70, 'g': 71, 'h': 72, 'I': 73, 'j': 74,
             'k': 75, 'l': 76, 'm': 77, 'n': 78, 'o': 79,
             'p': 80, 'q': 81, 'r': 82, 's': 83, 't': 84,
             'u': 85, 'v': 86, 'w': 87, 'x': 88, 'y': 89,
             'z': 90, '{': 91, '|': 92, '}': 93, '~': 94,
             'DEL': 95, 'FNC3': 96, 'FNC2': 97, 'SHIFT': 98,
             'Code C': 99, 'FNC4': 100, 'Code A': 101,
             'FNC1': 102, 'START A': 103, 'START B': 104,
             'START C': 105, 'STOP': 106
             }

def codeBFromString (string):
    code=code_img_data[code_b_data['START B']]
    count=1
    checksum=code_b_data['START B']
    for letter in string:
        code += code_img_data[code_b_data[letter]]
        checksum += count*code_b_data[letter]
        count += 1
    code += code_img_data[checksum%103]
    code += code_img_data[code_b_data['STOP']]
    return (code)

def codeBCFromString (string):
    # Look for even numbered groups of digits (at least 4) to use code c
    frags = re.split('(dd(?:dd)+)', string)
    if frags[0]:
        # the string starts with regular code b data
        code = code_img_data[code_b_data['START B']]
        checksum = code_b_data['START B']
        codeb = True
    else:
        # the string starts with a matching set of numbers - code c
        code = code_img_data[code_b_data['START C']]
        checksum = code_b_data['START C']
        codeb = False
        frags.pop(0)

    # remove the last frag if it's blank
    # i.e. if the string ends with a matching numeric sequence
    if not(frags[-1]):
        frags.pop(-1)

    count = 1
    for frag in frags:
        if codeb:
            if count > 1: #switch to code b
                code += code_img_data[100]
                checksum += count*100
                count += 1
            for letter in frag:
                code += code_img_data[code_b_data[letter]]
                checksum += count*code_b_data[letter]
                count += 1
        else:
            if count > 1: #switch to code c
                code += code_img_data[code_b_data['Code C']]
                checksum += count*code_b_data['Code C']
                count += 1
            for pair in re.findall('..', frag):
                code += code_img_data[int(pair)]
                checksum += count*int(pair)
                count += 1
        codeb = not(codeb)
    code += code_img_data[checksum%103]
    code += code_img_data[code_b_data['STOP']]
    return (code)

def barcodeImg (string, label=''):
    width = len(string) + 20
    im = Image.new('1', (width,70), 1)
    draw = ImageDraw.Draw(im)
    x = 10
    for char in string:
        draw.rectangle(((x, 10),(x, 50)), fill=not(int(char)))
        x += 1
    if label:
        labelsize = draw.textsize(label)
        draw.text((int((width-labelsize[0])/2.0), 55), label, fill=0)
    return im

bc_img = barcodeImg(codeBCFromString('496340'), '496340')
#bc_img.show()
bc_img.save(&#34;dsafdsa.png&#34;)


"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>Even</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>Home</li></a><a href=/post/><li class=mobile-menu-item>Archives</li></a><a href=/tags/><li class=mobile-menu-item>Tags</li></a><a href=/categories/><li class=mobile-menu-item>Categories</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>Even</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Home</a></li><li class=menu-item><a class=menu-item-link href=/post/>Archives</a></li><li class=menu-item><a class=menu-item-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-item-link href=/categories/>Categories</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>Python二维条形码生成</h1><div class=post-meta><span class=post-time>2011-10-26</span><div class=post-category><a href=/categories/emacs/>emacs</a>
<a href=/categories/org2blog/>org2blog</a>
<a href=/categories/programming/>programming</a>
<a href=/categories/tools/>tools</a></div><span class=more-meta>约 702 字</span>
<span class=more-meta>预计阅读 2 分钟</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>文章目录</h2><div class=post-toc-content><nav id=TableOfContents></nav></div></div><div class=post-outdated><div class=warn><p>【注意】最后更新于 <span class=timeago datetime=2011-10-26T09:10:11 title="October 26, 2011">October 26, 2011</span>，文中内容可能已过时，请谨慎使用。</p></div></div><div class=post-content><p>Python下可以用<a href=http://code.google.com/p/elaphe/>Elaphe</a>来生成二维条形码，如果不想安装软件的话，可以试试下面的脚本：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=ch>#!/usr/bin/env python</span>
<span class=kn>import</span> <span class=nn>re</span><span class=o>,</span> <span class=nn>Image</span><span class=o>,</span> <span class=nn>ImageDraw</span>

<span class=n>code_img_data</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;11011001100&#39;</span><span class=p>,</span><span class=s1>&#39;11001101100&#39;</span><span class=p>,</span><span class=s1>&#39;11001100110&#39;</span><span class=p>,</span>
               <span class=s1>&#39;10010011000&#39;</span><span class=p>,</span><span class=s1>&#39;10010001100&#39;</span><span class=p>,</span><span class=s1>&#39;10001001100&#39;</span><span class=p>,</span>
               <span class=s1>&#39;10011001000&#39;</span><span class=p>,</span><span class=s1>&#39;10011000100&#39;</span><span class=p>,</span><span class=s1>&#39;10001100100&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11001001000&#39;</span><span class=p>,</span><span class=s1>&#39;11001000100&#39;</span><span class=p>,</span><span class=s1>&#39;11000100100&#39;</span><span class=p>,</span>
               <span class=s1>&#39;10110011100&#39;</span><span class=p>,</span><span class=s1>&#39;10011011100&#39;</span><span class=p>,</span><span class=s1>&#39;10011001110&#39;</span><span class=p>,</span>
               <span class=s1>&#39;10111001100&#39;</span><span class=p>,</span><span class=s1>&#39;10011101100&#39;</span><span class=p>,</span><span class=s1>&#39;10011100110&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11001110010&#39;</span><span class=p>,</span><span class=s1>&#39;11001011100&#39;</span><span class=p>,</span><span class=s1>&#39;11001001110&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11011100100&#39;</span><span class=p>,</span><span class=s1>&#39;11001110100&#39;</span><span class=p>,</span><span class=s1>&#39;11101101110&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11101001100&#39;</span><span class=p>,</span><span class=s1>&#39;11100101100&#39;</span><span class=p>,</span><span class=s1>&#39;11100100110&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11101100100&#39;</span><span class=p>,</span><span class=s1>&#39;11100110100&#39;</span><span class=p>,</span><span class=s1>&#39;11100110010&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11011011000&#39;</span><span class=p>,</span><span class=s1>&#39;11011000110&#39;</span><span class=p>,</span><span class=s1>&#39;11000110110&#39;</span><span class=p>,</span>
               <span class=s1>&#39;10100011000&#39;</span><span class=p>,</span><span class=s1>&#39;10001011000&#39;</span><span class=p>,</span><span class=s1>&#39;10001000110&#39;</span><span class=p>,</span>
               <span class=s1>&#39;10110001000&#39;</span><span class=p>,</span><span class=s1>&#39;10001101000&#39;</span><span class=p>,</span><span class=s1>&#39;10001100010&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11010001000&#39;</span><span class=p>,</span><span class=s1>&#39;11000101000&#39;</span><span class=p>,</span><span class=s1>&#39;11000100010&#39;</span><span class=p>,</span>
               <span class=s1>&#39;10110111000&#39;</span><span class=p>,</span><span class=s1>&#39;10110001110&#39;</span><span class=p>,</span><span class=s1>&#39;10001101110&#39;</span><span class=p>,</span>
               <span class=s1>&#39;10111011000&#39;</span><span class=p>,</span><span class=s1>&#39;10111000110&#39;</span><span class=p>,</span><span class=s1>&#39;10001110110&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11101110110&#39;</span><span class=p>,</span><span class=s1>&#39;11010001110&#39;</span><span class=p>,</span><span class=s1>&#39;11000101110&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11011101000&#39;</span><span class=p>,</span><span class=s1>&#39;11011100010&#39;</span><span class=p>,</span><span class=s1>&#39;11011101110&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11101011000&#39;</span><span class=p>,</span><span class=s1>&#39;11101000110&#39;</span><span class=p>,</span><span class=s1>&#39;11100010110&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11101101000&#39;</span><span class=p>,</span><span class=s1>&#39;11101100010&#39;</span><span class=p>,</span><span class=s1>&#39;11100011010&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11101111010&#39;</span><span class=p>,</span><span class=s1>&#39;11001000010&#39;</span><span class=p>,</span><span class=s1>&#39;11110001010&#39;</span><span class=p>,</span>
               <span class=s1>&#39;10100110000&#39;</span><span class=p>,</span><span class=s1>&#39;10100001100&#39;</span><span class=p>,</span><span class=s1>&#39;10010110000&#39;</span><span class=p>,</span>
               <span class=s1>&#39;10010000110&#39;</span><span class=p>,</span><span class=s1>&#39;10000101100&#39;</span><span class=p>,</span><span class=s1>&#39;10000100110&#39;</span><span class=p>,</span>
               <span class=s1>&#39;10110010000&#39;</span><span class=p>,</span><span class=s1>&#39;10110000100&#39;</span><span class=p>,</span><span class=s1>&#39;10011010000&#39;</span><span class=p>,</span>
               <span class=s1>&#39;10011000010&#39;</span><span class=p>,</span><span class=s1>&#39;10000110100&#39;</span><span class=p>,</span><span class=s1>&#39;10000110010&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11000010010&#39;</span><span class=p>,</span><span class=s1>&#39;11001010000&#39;</span><span class=p>,</span><span class=s1>&#39;11110111010&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11000010100&#39;</span><span class=p>,</span><span class=s1>&#39;10001111010&#39;</span><span class=p>,</span><span class=s1>&#39;10100111100&#39;</span><span class=p>,</span>
               <span class=s1>&#39;10010111100&#39;</span><span class=p>,</span><span class=s1>&#39;10010011110&#39;</span><span class=p>,</span><span class=s1>&#39;10111100100&#39;</span><span class=p>,</span>
               <span class=s1>&#39;10011110100&#39;</span><span class=p>,</span><span class=s1>&#39;10011110010&#39;</span><span class=p>,</span><span class=s1>&#39;11110100100&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11110010100&#39;</span><span class=p>,</span><span class=s1>&#39;11110010010&#39;</span><span class=p>,</span><span class=s1>&#39;11011011110&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11011110110&#39;</span><span class=p>,</span><span class=s1>&#39;11110110110&#39;</span><span class=p>,</span><span class=s1>&#39;10101111000&#39;</span><span class=p>,</span>
               <span class=s1>&#39;10100011110&#39;</span><span class=p>,</span><span class=s1>&#39;10001011110&#39;</span><span class=p>,</span><span class=s1>&#39;10111101000&#39;</span><span class=p>,</span>
               <span class=s1>&#39;10111100010&#39;</span><span class=p>,</span><span class=s1>&#39;11110101000&#39;</span><span class=p>,</span><span class=s1>&#39;11110100010&#39;</span><span class=p>,</span>
               <span class=s1>&#39;10111011110&#39;</span><span class=p>,</span><span class=s1>&#39;10111101110&#39;</span><span class=p>,</span><span class=s1>&#39;11101011110&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11110101110&#39;</span><span class=p>,</span><span class=s1>&#39;11010000100&#39;</span><span class=p>,</span><span class=s1>&#39;11010010000&#39;</span><span class=p>,</span>
               <span class=s1>&#39;11010011100&#39;</span><span class=p>,</span><span class=s1>&#39;1100011101011&#39;</span>
               <span class=p>]</span>

<span class=n>code_b_data</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39; &#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>&#39;!&#39;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;&#34;&#39;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;#&#39;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>&#39;$&#39;</span><span class=p>:</span> <span class=mi>4</span><span class=p>,</span>
             <span class=s1>&#39;%&#39;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span> <span class=s1>&#39;&amp;&#39;</span><span class=p>:</span> <span class=mi>6</span><span class=p>,</span> <span class=s1>&#39;&#39;&#39;: 7, &#39;(&#39;: 8, &#39;)&#39;: 9,
</span><span class=s1>             &#39;*&#39;: 10, &#39;+&#39;: 11, &#39;,&#39;: 12, &#39;-&#39;: 13, &#39;.&#39;: 14,
</span><span class=s1>             &#39;/&#39;: 15, &#39;0&#39;: 16, &#39;1&#39;: 17, &#39;2&#39;: 18, &#39;3&#39;: 19,
</span><span class=s1>             &#39;4&#39;: 20, &#39;5&#39;: 21, &#39;6&#39;: 22, &#39;7&#39;: 23, &#39;8&#39;: 24,
</span><span class=s1>             &#39;9&#39;: 25, &#39;:&#39;: 26, &#39;;&#39;: 27, &#39;&lt;&#39;: 28, &#39;=&#39;: 29,
</span><span class=s1>             &#39;&gt;&#39;: 30, &#39;?&#39;: 31, &#39;@&#39;: 32, &#39;A&#39;: 33, &#39;B&#39;: 34,
</span><span class=s1>             &#39;C&#39;: 35, &#39;D&#39;: 36, &#39;E&#39;: 37, &#39;F&#39;: 38, &#39;G&#39;: 39,
</span><span class=s1>             &#39;H&#39;: 40, &#39;I&#39;: 41, &#39;J&#39;: 42, &#39;K&#39;: 43, &#39;L&#39;: 44,
</span><span class=s1>             &#39;M&#39;: 45, &#39;N&#39;: 46, &#39;O&#39;: 47, &#39;P&#39;: 48, &#39;Q&#39;: 49,
</span><span class=s1>             &#39;R&#39;: 50, &#39;S&#39;: 51, &#39;T&#39;: 52, &#39;U&#39;: 53, &#39;V&#39;: 54,
</span><span class=s1>             &#39;W&#39;: 55, &#39;X&#39;: 56, &#39;Y&#39;: 57, &#39;Z&#39;: 58, &#39;[&#39;: 59,
</span><span class=s1>             &#39;</span><span class=se>\&#39;</span><span class=s1>: 60, &#39;]&#39;: 61, &#39;^&#39;: 62, &#39;_&#39;: 63, &#39;`&#39;: 64,
</span><span class=s1>             &#39;a&#39;: 65, &#39;b&#39;: 66, &#39;c&#39;: 67, &#39;d&#39;: 68, &#39;e&#39;: 69,
</span><span class=s1>             &#39;f&#39;: 70, &#39;g&#39;: 71, &#39;h&#39;: 72, &#39;I&#39;: 73, &#39;j&#39;: 74,
</span><span class=s1>             &#39;k&#39;: 75, &#39;l&#39;: 76, &#39;m&#39;: 77, &#39;n&#39;: 78, &#39;o&#39;: 79,
</span><span class=s1>             &#39;p&#39;: 80, &#39;q&#39;: 81, &#39;r&#39;: 82, &#39;s&#39;: 83, &#39;t&#39;: 84,
</span><span class=s1>             &#39;u&#39;: 85, &#39;v&#39;: 86, &#39;w&#39;: 87, &#39;x&#39;: 88, &#39;y&#39;: 89,
</span><span class=s1>             &#39;z&#39;: 90, &#39;{&#39;: 91, &#39;|&#39;: 92, &#39;}&#39;: 93, &#39;~&#39;: 94,
</span><span class=s1>             &#39;DEL&#39;: 95, &#39;FNC3&#39;: 96, &#39;FNC2&#39;: 97, &#39;SHIFT&#39;: 98,
</span><span class=s1>             &#39;Code C&#39;: 99, &#39;FNC4&#39;: 100, &#39;Code A&#39;: 101,
</span><span class=s1>             &#39;FNC1&#39;: 102, &#39;START A&#39;: 103, &#39;START B&#39;: 104,
</span><span class=s1>             &#39;START C&#39;: 105, &#39;STOP&#39;: 106
</span><span class=s1>             }
</span><span class=s1>
</span><span class=s1>def codeBFromString (string):
</span><span class=s1>    code=code_img_data[code_b_data[&#39;START B&#39;]]
</span><span class=s1>    count=1
</span><span class=s1>    checksum=code_b_data[&#39;START B&#39;]
</span><span class=s1>    for letter in string:
</span><span class=s1>        code += code_img_data[code_b_data[letter]]
</span><span class=s1>        checksum += count*code_b_data[letter]
</span><span class=s1>        count += 1
</span><span class=s1>    code += code_img_data[checksum%103]
</span><span class=s1>    code += code_img_data[code_b_data[&#39;STOP&#39;]]
</span><span class=s1>    return (code)
</span><span class=s1>
</span><span class=s1>def codeBCFromString (string):
</span><span class=s1>    # Look for even numbered groups of digits (at least 4) to use code c
</span><span class=s1>    frags = re.split(&#39;(dd(?:dd)+)&#39;, string)
</span><span class=s1>    if frags[0]:
</span><span class=s1>        # the string starts with regular code b data
</span><span class=s1>        code = code_img_data[code_b_data[&#39;START B&#39;]]
</span><span class=s1>        checksum = code_b_data[&#39;START B&#39;]
</span><span class=s1>        codeb = True
</span><span class=s1>    else:
</span><span class=s1>        # the string starts with a matching set of numbers - code c
</span><span class=s1>        code = code_img_data[code_b_data[&#39;START C&#39;]]
</span><span class=s1>        checksum = code_b_data[&#39;START C&#39;]
</span><span class=s1>        codeb = False
</span><span class=s1>        frags.pop(0)
</span><span class=s1>
</span><span class=s1>    # remove the last frag if it&#39;s blank
</span><span class=s1>    # i.e. if the string ends with a matching numeric sequence
</span><span class=s1>    if not(frags[-1]):
</span><span class=s1>        frags.pop(-1)
</span><span class=s1>
</span><span class=s1>    count = 1
</span><span class=s1>    for frag in frags:
</span><span class=s1>        if codeb:
</span><span class=s1>            if count &gt; 1: #switch to code b
</span><span class=s1>                code += code_img_data[100]
</span><span class=s1>                checksum += count*100
</span><span class=s1>                count += 1
</span><span class=s1>            for letter in frag:
</span><span class=s1>                code += code_img_data[code_b_data[letter]]
</span><span class=s1>                checksum += count*code_b_data[letter]
</span><span class=s1>                count += 1
</span><span class=s1>        else:
</span><span class=s1>            if count &gt; 1: #switch to code c
</span><span class=s1>                code += code_img_data[code_b_data[&#39;Code C&#39;]]
</span><span class=s1>                checksum += count*code_b_data[&#39;Code C&#39;]
</span><span class=s1>                count += 1
</span><span class=s1>            for pair in re.findall(&#39;..&#39;, frag):
</span><span class=s1>                code += code_img_data[int(pair)]
</span><span class=s1>                checksum += count*int(pair)
</span><span class=s1>                count += 1
</span><span class=s1>        codeb = not(codeb)
</span><span class=s1>    code += code_img_data[checksum%103]
</span><span class=s1>    code += code_img_data[code_b_data[&#39;STOP&#39;]]
</span><span class=s1>    return (code)
</span><span class=s1>
</span><span class=s1>def barcodeImg (string, label=&#39;&#39;):
</span><span class=s1>    width = len(string) + 20
</span><span class=s1>    im = Image.new(&#39;1&#39;, (width,70), 1)
</span><span class=s1>    draw = ImageDraw.Draw(im)
</span><span class=s1>    x = 10
</span><span class=s1>    for char in string:
</span><span class=s1>        draw.rectangle(((x, 10),(x, 50)), fill=not(int(char)))
</span><span class=s1>        x += 1
</span><span class=s1>    if label:
</span><span class=s1>        labelsize = draw.textsize(label)
</span><span class=s1>        draw.text((int((width-labelsize[0])/2.0), 55), label, fill=0)
</span><span class=s1>    return im
</span><span class=s1>
</span><span class=s1>bc_img = barcodeImg(codeBCFromString(&#39;496340&#39;), &#39;496340&#39;)
</span><span class=s1>#bc_img.show()
</span><span class=s1>bc_img.save(&#34;dsafdsa.png&#34;)
</span></code></pre></td></tr></table></div></div></div><div class=post-copyright><p class=copyright-item><span class=item-title>文章作者</span>
<span class=item-content>Chen, Zai-Chun</span></p><p class=copyright-item><span class=item-title>上次更新</span>
<span class=item-content>2011-10-26</span></p><p class=copyright-item><span class=item-title>许可协议</span>
<span class=item-content><a rel="license noopener" href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank>CC BY-NC-ND 4.0</a></span></p></div><footer class=post-footer><div class=post-tags><a href=/tags/emacs/>emacs</a>
<a href=/tags/linux/>Linux</a>
<a href=/tags/org2blog/>org2blog</a>
<a href=/tags/python/>python</a></div><nav class=post-nav><a class=prev href=/post/2011-10-27-zenburn_code_css_test/><i class="iconfont icon-left"></i>
<span class="prev-text nav-default">zenburn-code css</span>
<span class="prev-text nav-mobile">上一篇</span></a>
<a class=next href=/post/2011-10-24-ibus_sunpinyin_cadidates/><span class="next-text nav-default">ibus-sunpinyin翻页设置</span>
<span class="next-text nav-mobile">下一篇</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div><div id=gitalk-container></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js crossorigin=anonymous></script><script type=text/javascript>var gitalk=new Gitalk({id:'2011-10-26 09:10:11 \u002b0800 \u002b0800',title:'Python二维条形码生成',clientID:'069dfcb7a556cb293b47',clientSecret:'1d363446ddb5a4aa2bbad9d0b23ac78eca00f3ad',repo:'chenzaichun.github.io',owner:'chenzaichun',admin:['chenzaichun'],body:decodeURI(location.href)});gitalk.render('gitalk-container')</script><noscript>Please enable JavaScript to view the <a href=https://github.com/gitalk/gitalk>comments powered by gitalk.</a></noscript></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:ChenZaichun@gmail.com class="iconfont icon-email" title=email></a><a href=https://twitter.com/chenzaichun class="iconfont icon-twitter" title=twitter></a><a href=https://facebook.com/chenzaichun class="iconfont icon-facebook" title=facebook></a><a href=https://github.com/chenzaichun class="iconfont icon-github" title=github></a><a href=https://weibo.com/archlinux class="iconfont icon-weibo" title=weibo></a><a href=https://chenzaichun.github.io/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>由 <a class=hexo-link href=https://gohugo.io>Hugo</a> 强力驱动</span>
<span class=division>|</span>
<span class=theme-info>主题 -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span>
<span class=copyright-year>&copy;
2009 -
2021<span class=heart><i class="iconfont icon-heart"></i></span><span>Chen, Zai-Chun</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin=anonymous></script><script>var languageCode="en".replace(/-/g,'_').replace(/_(.*)/,function(b,a){return b.replace(a,a.toUpperCase())});timeago().render(document.querySelectorAll('.timeago'),languageCode),timeago.cancel()</script><script src=https://cdn.jsdelivr.net/npm/raphael@2.2.7/raphael.min.js integrity="sha256-67By+NpOtm9ka1R6xpUefeGOY8kWWHHRAKlvaTJ7ONI=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/flowchart.js@1.8.0/release/flowchart.min.js integrity="sha256-zNGWjubXoY6rb5MnmpBNefO0RgoVYfle9p0tvOQM+6k=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.js integrity="sha256-4O4pS1SH31ZqrSO2A/2QJTVjTPqVe+jnYgOWUVr7EEc=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/snapsvg@0.5.1/dist/snap.svg-min.js integrity="sha256-oI+elz+sIm+jpn8F/qEspKoKveTc5uKeFHNNVexe6d8=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/underscore@1.8.3/underscore-min.js integrity="sha256-obZACiHd7gkOk9iIL/pimWMTJ4W/pBsKu+oZnSeBIek=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/gh/bramp/js-sequence-diagrams@2.0.1/dist/sequence-diagram-min.js integrity=sha384-8748Vn52gHJYJI0XEuPB2QlPVNUkJlJn9tHqKec6J3q2r9l8fvRxrgn/E5ZHV0sP crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/bramp/js-sequence-diagrams@2.0.1/dist/sequence-diagram-min.css integrity=sha384-6QbLKJMz5dS3adWSeINZe74uSydBGFbnzaAYmp+tKyq60S7H2p6V7g1TysM5lAaF crossorigin=anonymous><script type=text/javascript src=/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js></script><script type=text/javascript>window.MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],tags:'ams'}}</script><script async src=https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin=anonymous></script></body></html>